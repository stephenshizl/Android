<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<link rel="stylesheet" href="Word2Chm.css" type="text/css">
<title> monkeyrunner</title>
</head>
<body>   
<div class=WordSection8 style='layout-grid:15.6pt'><br clear=all
style='page-break-before:always'>

<p class=MsoNormal align=center style='text-align:center'><a name=monkeyrunner><b><span
lang=EN-US style='font-size:18.0pt'>monkeyrunner</span></b></a></p>
<p class=MsoNormal align=center style='text-align:center'><span
>署名：译言</span><span>biAji </span></p>
<p class=MsoNormal align=center style='text-align:center'><span
>链接：</span><span><a target="_blank" href="http://article.yeeyan.org/view/37503/164523">http://article.yeeyan.org/view/37503/164523</a>
</span></p>
<p class=MsoNormal align=center style='text-align:center'><span
>版本：</span><span>Android 2.3 r1</span></p>
<p class=MsoNormal align=center style='text-align:center'><span
>整理：农民伯伯</span></p>
<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-size:12.0pt;font-family:宋体;color:red'>声明</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
>本文档转载并整理自译言：</span><span><a target="_blank" href="http://article.yeeyan.org/view/37503/164523">Monkeyrunner <span
lang=EN-US ><span>使用说明</span></span></a></span></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-size:12.0pt;font-family:宋体'>原文</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-size:12.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span
lang=EN-US><a target="_blank" href="http://developer.android.com/guide/developing/tools/monkeyrunner_concepts.html">http://developer.android.com/guide/developing/tools/monkeyrunner_concepts.html</a>
</span></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:"Times New Roman","serif"'>monkeyrunner</span><span
>工具提供了一个</span><span style='font-family:"Times New Roman","serif"'>API</span><span
>，使用此</span><span style='font-family:"Times New Roman","serif"'>API</span><span
>写出的程序可以在</span><span style='font-family:"Times New Roman","serif"'>Android</span><span
>代码之外控制</span><span style='font-family:"Times New Roman","serif"'>Android</span><span
>设备和模拟器。通过</span><span style='font-family:
"Times New Roman","serif"'>monkeyrunner</span><span >，您可以写出一个</span><span
lang=EN-US style='font-family:"Times New Roman","serif"'>Python</span><span
>程序去安装一个</span><span style='font-family:"Times New Roman","serif"'>Android</span><span
>应用程序或测试包，运行它，向它发送模拟击键，截取它的用户界面图片，并将截图存储于工作站上。</span><span
lang=EN-US style='font-family:"Times New Roman","serif"'>monkeyrunner</span><span
>工具的主要设计目的是用于测试功能</span><span
style='font-family:"Times New Roman","serif"'>/</span><span style='font-family:
宋体'>框架水平上的应用程序和设备，或用于运行单元测试套件，但您当然也可以将其用于其它目的。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:"Times New Roman","serif"'>monkeyrunner</span><span
>工具与</span><span><a target="_blank" href="http://developer.android.com/guide/developing/tools/monkey.html">(<span
style='color:windowtext;text-decoration:none'><u><span style='color:blue'>UI/Application
Exerciser Monkey</span></u></span>)<span ><span
lang=EN-US>用</span></span><span ><span
lang=EN-US>户界面</span></span><span style='font-family:"Times New Roman","serif"'>/</span></a><a target="_blank" href="http://developer.android.com/guide/developing/tools/monkey.html"><span
lang=EN-US ><span>应用程序测试工具</span></span></a></span><span
>，也称为</span><span class=y2Char><span
style='font-family:"Calibri","sans-serif"'>monkey</span></span><span
>工具并无关联。</span><code><span style='font-size:
12.0pt'>monkey</span></code><span >工具直接运行在设备或模拟器的</span><code><span
lang=EN-US style='font-size:12.0pt'><a target="_blank" href="http://developer.android.com/guide/developing/tools/adb.html"><span
style='font-size:10.5pt;font-family:"Calibri","sans-serif"'>adb</span></a> </span></code><span
lang=EN-US style='font-family:"Times New Roman","serif"'>shell</span><span
>中，生成用户或系统的伪随机事件流。而</span><span
style='font-family:"Times New Roman","serif"'>monkeyrunner</span><span
>工具则是在工作站上通过</span><span style='font-family:
"Times New Roman","serif"'>API</span><span >定义的特定命令和事件控制设备或模拟器。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:"Times New Roman","serif"'>monkeyrunner</span><span
>工具为</span><span style='font-family:"Times New Roman","serif"'>Android</span><span
>测试提供了以下特性：</span></p>
<p class=MsoNormal align=left style='margin-left:44.25pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
>多设备控制：</span><span style='font-family:"Times New Roman","serif"'>monkeyrunner&nbsp;&nbsp;&nbsp;&nbsp;API</span><span
>可以跨多个设备或模拟器实施测试套件。您可以在同一时间接上所有的设备或一次启动全部模拟器（或统统一起），依据程序依次连接到每一个，然后运行一个或多个测试。您也可以用程序启动一个配置好的模拟器，运行一个或多个测试，然后关闭模拟器。</span></p>
<p class=MsoNormal align=left style='margin-left:44.25pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
>功能测试：</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span
lang=EN-US style='font-family:"Times New Roman","serif"'>monkeyrunner</span><span
>可以为一个应用自动贯彻一次功能测试。您提供按键或触摸事件的输入数值，然后观察输出结果的截屏。</span></p>
<p class=MsoNormal align=left style='margin-left:44.25pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
>回归测试：</span><span style='font-family:"Times New Roman","serif"'>monkeyrunner</span><span
>可以运行某个应用，并将其结果截屏与既定已知正确的结果截屏相比较，以此测试应用的稳定性。</span><span
lang=EN-US>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:44.25pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
>可扩展的自动化：由于</span><span style='font-family:
"Times New Roman","serif"'>monkeyrunner</span><span >是一个</span><span
lang=EN-US style='font-family:"Times New Roman","serif"'>API</span><span
>工具包，您可以基于</span><span style='font-family:
"Times New Roman","serif"'>Python</span><span >模块和程序开发一整套系统，以此来控制</span><span
lang=EN-US style='font-family:"Times New Roman","serif"'>Android</span><span
>设备。除了使用</span><span style='font-family:"Times New Roman","serif"'>monkeyrunner&nbsp;&nbsp;&nbsp;&nbsp;API</span><span
>之外，您还可以使用标准的</span><span style='font-family:
"Times New Roman","serif"'>Python&nbsp;&nbsp;&nbsp;&nbsp;</span><code><span
lang=EN-US style='font-size:12.0pt'><a target="_blank" href="http://www.google.com/url?q=http%3A%2F%2Fdocs.python.org%2Flibrary%2Fos.html&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGxDpxs-fdWHno6JjmEGvB3S9XZfQ"><span
style='font-size:10.5pt;font-family:"Calibri","sans-serif"'>os</span></a></span></code><span
>和</span><code><span style='font-size:12.0pt'><a target="_blank" href="http://www.google.com/url?q=http%3A%2F%2Fdocs.python.org%2Flibrary%2Fsubprocess.html&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGqNTABJ49zU7KiLMnUR_EMYHaSSw"><span
style='font-size:10.5pt;font-family:"Calibri","sans-serif"'>subprocess</span></a></span></code><span
>模块来调用如</span><span style='font-family:"Times New Roman","serif"'><a target="_blank" href="http://developer.android.com/guide/developing/tools/adb.html">Android
Debug Bridge</a></span><span >这样的</span><span
style='font-family:"Times New Roman","serif"'>Android</span><span
>工具</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span
>。</span><span>&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class=MsoNormal align=left style='margin-left:44.25pt;text-align:left'><span
class=goog-gtc-translatable><span >您还可以向</span><span
lang=EN-US>monkeyrunner API</span></span><span class=goog-gtc-translatable><span
>中添加您自己的类。我们将在</span><span><a target="_blank" href="http://developer.android.com/guide/developing/tools/monkeyrunner_concepts.html#Plugins"><span
lang=EN-US ><span>使用插件扩展</span></span>monkeyrunner</a></span></span><span
class=goog-gtc-translatable><span >一节中对此进行详细讨论</span> </span><span
class=goog-gtc-translatable><span >。</span></span></p>
<p class=MsoNormal align=left style='text-align:left'><span
class=goog-gtc-translatable><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; monkeyrunner</span></span><span
class=goog-gtc-translatable><span >工具使用</span><span
lang=EN-US>Jython</span></span><span class=goog-gtc-translatable><span
>（使用</span><span>Java</span></span><span
class=goog-gtc-translatable><span >编程语言的一种</span><span
lang=EN-US>Python</span></span><span class=goog-gtc-translatable><span
>实现）。</span><span>Jython</span></span><span
class=goog-gtc-translatable><span >允许</span><span
lang=EN-US>monkeyrunnerAPI</span></span><span class=goog-gtc-translatable><span
>与</span><span>Android</span></span><span
class=goog-gtc-translatable><span >框架轻松的进行交互。使用</span><span
lang=EN-US>Jython</span></span><span class=goog-gtc-translatable><span
>，您可以使用</span><span>Python</span></span><span
class=goog-gtc-translatable><span >语法来获取</span><span
lang=EN-US>API</span></span><span class=goog-gtc-translatable><span
>中的常量、类以及方法。</span></span></p>
<p class=MsoNormal align=left style='text-align:left'><span
class=goog-gtc-translatable><span>&nbsp;</span></span></p>
<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:12.0pt;font-family:宋体'>一个简单的</span></b><b><span
style='font-size:12.0pt'>monkeyrunner</span></b><b><span style='font-size:12.0pt;
font-family:宋体'>程序实例</span></b><b><span style='font-size:12.0pt'>(A
Simple monkeyrunner Program)</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
>以下为一个简单的</span><span>monkeyrunner</span><span
>程序，它将会连接到一个设备，创建一个</span><span>MonkeyDevice</span><span
>对象。使用</span><span>MonkeyDevice</span><span
>对象，程序将安装一个</span><span>Android</span><span
>应用包，运行其中一个活动，并向其发送按键事件。程序接下来会将结果截图，创建一个</span><span
lang=EN-US>MonkeyImage</span><span >对象，并使用这个对象截图将保存至</span><span
lang=EN-US>.png</span><span >文件。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US><img border=0 width=553 height=388
src="image/image013.jpg"></span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US>&nbsp;</span></p>
<p class=MsoNormal align=center style='text-align:center;text-indent:21.0pt'><b><span
lang=EN-US style='font-size:14.0pt'>The monkeyrunner API</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US>monkeyrunnerAPI</span><span >于</span><span
class=y2Char><span style='font-family:"Calibri","sans-serif"'>com.android.monkeyrunner</span></span><span
>包中包含三个模块：</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><code><span
lang=EN-US style='font-size:12.0pt'><a target="_blank" href="http://developer.android.com/guide/developing/tools/MonkeyRunner.html"><span
style='font-size:10.5pt;font-family:"Calibri","sans-serif"'>MonkeyRunner</span></a></span></code><span
>：一个为</span><span style='font-family:"Times New Roman","serif"'>monkeyrunner</span><span
>程序提供工具方法的类。这个类提供了用于连接</span><span
style='font-family:"Times New Roman","serif"'>monkeyrunner</span><span
>至设备或模拟器的方法。它还提供了用于创建一个</span><span
style='font-family:"Times New Roman","serif"'>monkeyrunner</span><span
>程序的用户界面以及显示内置帮助的方法。</span><span>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span>&nbsp;</span><code><span
lang=EN-US style='font-size:12.0pt'><a target="_blank" href="http://developer.android.com/guide/developing/tools/MonkeyDevice.html"><span
style='font-size:10.5pt;font-family:"Calibri","sans-serif"'>MonkeyDevice</span></a></span></code><span
>：表示一个设备或模拟器。这个类提供了安装和卸载程序包、启动一个活动以及发送键盘或触摸事件到应用程序的方法。您也可以用这个类来运行测试包。</span><span
lang=EN-US>&nbsp;&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><code><span
lang=EN-US style='font-size:12.0pt'><a target="_blank" href="http://developer.android.com/guide/developing/tools/MonkeyImage.html"><span
style='font-size:10.5pt;font-family:"Calibri","sans-serif"'>MonkeyImage</span></a></span></code><span
>：表示一个截图对象。这个类提供了截图、将位图转换成各种格式、比较两个</span><span
lang=EN-US style='font-family:"Times New Roman","serif"'>MonkeyImage</span><span
>对象以及写图像到文件的方法。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>在</span><span>python</span><span
>程序中，您将以</span><span>Python</span><span
>模块的形式使用这些类。</span><span>monkeyrunner</span><span
>工具不会自动导入这些模块。您必须使用类似如下的</span><span>from</span><span
>语句：</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US><img border=0 width=434 height=38
src="image/image014.png"></span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>其中，为您想要导入的类名。您可以在一个</span><span>from</span><span
>语句中导入超过一个模块，其间以逗号分隔。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US>&nbsp;</span></p>
<p class=MsoNormal align=center style='text-align:center;text-indent:21.0pt'><b><span
lang=EN-US style='font-size:14.0pt'>Running monkeyrunner</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>您可以直接使用一个代码文件运行</span><span>monkeyrunner</span><span
>，抑或在交互式对话中输入</span><span>monkeyrunner</span><span
>语句。不论使用哪种方式，您都需要调用</span><span>SDK</span><span
>目录的</span><span>tools</span><span
>子目录下的</span><span>monkeyrunner</span><span
>命令。如果您提供一个文件名作为运行参数，则</span><span>monkeyrunner</span><span
>将视文件内容为</span><span>Python</span><span
>程序，并加以运行；否则，它将提供一个交互对话环境。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US>monkeyrunner</span><span >命令的语法为：</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US><img border=0 width=511 height=38
src="image/image015.png"></span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>表</span><span> 1</span><span
>阐释了命令的标志和参数。</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=539
 style='margin-left:26.7pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=161 valign=top style='width:120.45pt;border:solid black 1.0pt;
  border-right:solid windowtext 1.0pt;background:#DEE8F1;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  >参数</span></p>
  </td>
  <td width=378 valign=top style='width:10.0cm;border:solid black 1.0pt;
  border-left:none;background:#DEE8F1;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  >说明</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 style='width:120.45pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=y2 align=center style='text-align:center;text-indent:0cm'><code><span
  style='font-size:12.0pt'>-plugin &lt;plugin_jar&gt;</span></code></p>
  </td>
  <td width=378 style='width:10.0cm;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span>&nbsp;</span><span
  >（可选）指定一个内含</span><span style='font-family:
  "Times New Roman","serif"'>monkeyrunner</span><span >插件的</span><code><span
  style='font-size:12.0pt'>.jar</span></code><span style='font-family:
  宋体'>文件。欲了解更多关于</span><span style='font-family:"Times New Roman","serif"'>monkeyrunner</span><span
  >插件的内容，请参照</span><span><a
  href="http://developer.android.com/guide/developing/tools/monkeyrunner_concepts.html#Plugins">(Extending
  monkeyrunner with plugins)<span ><span
 >使</span></span><span ><span
 >用插件扩展</span></span><span style='font-family:"Times New Roman","serif"'>monkeyrunner</span></a></span><span
  >。要指定多个文件，包括多次论证。如欲指定超过一个文件，可以多次使用此参数。</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 style='width:120.45pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=y2 align=center style='text-align:center;text-indent:0cm'><code><span
  style='font-size:12.0pt'>&lt;program_filename&gt;</span></code></p>
  </td>
  <td width=378 style='width:10.0cm;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span style='font-family:
  宋体'>如果您指定此参数，</span><span class=y2Char><span style='font-family:
  "Calibri","sans-serif"'>monkeyrunner</span></span><span style='font-family:
  宋体'>将视文件内容为</span><span style='font-family:"Times New Roman","serif"'>Python</span><span
  >程序并予以执行。如果此参数未予指定，则开启一个交互式会话。</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 style='width:120.45pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=y2 align=center style='text-align:center;text-indent:0cm'><code><span
  style='font-size:12.0pt'>&lt;program_options&gt;</span></code></p>
  </td>
  <td width=378 style='width:10.0cm;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span style='font-family:
  宋体'>（可选）</span><span style='font-family:"Times New Roman","serif"'>&lt;</span><span
  >程序文件名</span><span style='font-family:"Times New Roman","serif"'>&gt;&nbsp;</span><span
  >所指定的程序所需的参数</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;</span></p>
<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:14.0pt'>monkeyrunner</span></b><b><span style='font-size:14.0pt;
font-family:宋体'>内建帮助</span></b><b><span style='font-size:14.0pt'>(monkeyrunner
Built-in Help)</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>您可以用以下命令来生成</span><span>monkeyrunner</span><span
>的</span><span>API</span><span
>参考：</span></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img
border=0 width=381 height=40
src="image/image016.png"></span></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
>参数说明：</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
>可以为</span><code><span style='font-size:12.0pt'>text</span></code><span
>或</span><code><span style='font-size:12.0pt'>html</span></code><span
>，分别代表纯文本和</span><span style='font-family:
"Times New Roman","serif"'>HTML</span><span >输出。</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
>指定了输出文件的全路经名称。</span></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;</span></p>
<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:14.0pt;font-family:宋体'>使用插件扩展</span></b><b><span
style='font-size:14.0pt'>monkeyrunner(Extending monkeyrunner with Plugins)</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>您可以用</span><span style='font-family:"Times New Roman","serif"'>Java</span><span
>语言创建新的类，并打包成一个或多个</span><code><span
style='font-size:12.0pt'>.jar</span></code><span >文件，以此来扩展</span><span
lang=EN-US style='font-family:"Times New Roman","serif"'>monkeyrunnerAPI</span><span
>。您可以使用您自己写的类或者继承现有的类来扩展</span><span
style='font-family:"Times New Roman","serif"'>monkeyrunnerAPI</span><span
>。您还可以使用此功能来初始化</span><span style='font-family:
"Times New Roman","serif"'>monkeyrunner</span><span >环境。</span></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
>为了使</span><span style='font-family:"Times New Roman","serif"'>monkeyrunner</span><span
>加载一个插件，您应当如使用如</span><span><a target="_blank" href="http://developer.android.com/guide/developing/tools/monkeyrunner_concepts.html#table1"><span
lang=EN-US ><span>表</span></span><span
style='font-family:"Times New Roman","serif"'>1</span></a></span><span
>中所述的</span><code><span style='font-size:12.0pt'>-plugin</span></code><span
>参数来调用</span><span class=y2Char><span
style='font-family:"Calibri","sans-serif"'>monkeyrunner</span></span><span
>命令。</span></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
>在您编写的插件中，您可以导入或继承位于</span><span class=y2Char><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>com.android.monkeyrunner</span></span><span
>包中的几个主要的</span><span style='font-family:"Times New Roman","serif"'>monkeyrunner</span><span
>类：</span><span class=y2Char><span
style='font-family:"Calibri","sans-serif"'>MonkeyDevice</span></span><span
>，</span> <span class=y2Char><span
style='font-family:"Calibri","sans-serif"'>MonkeyImage</span></span><span
>和</span><span class=y2Char><span
style='font-family:"Calibri","sans-serif"'>MonkeyRunner</span></span><span
>（参见</span><span style='font-family:"Times New Roman","serif"'><a target="_blank" href="http://developer.android.com/guide/developing/tools/monkeyrunner_concepts.html#APIClasses">monkeyrunnerAPI</a>
</span><span >）。</span></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
>请注意，插件无法让你访问</span><span style='font-family:
"Times New Roman","serif"'>Android</span><span >的</span><span
lang=EN-US style='font-family:"Times New Roman","serif"'>SDK</span><span
>。您不能导入</span><span class=y2Char><span
style='font-family:"Calibri","sans-serif"'>com.android.app</span></span><span
>等包。这是因为</span><span style='font-family:"Times New Roman","serif"'>monkeyrunner</span><span
>是在框架</span><span style='font-family:"Times New Roman","serif"'>API</span><span
>层次之下与设备或模拟器进行交互的。</span></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-size:12.0pt;font-family:宋体'>插件启动类</span></b><b><span
style='font-size:12.0pt'>(The plugin startup class)</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
>用于插件的</span><span class=y2Char><span
style='font-family:"Calibri","sans-serif"'>.jar</span></span><span
>文件可以指定一个类，使其在脚本执行之前就实例化。如欲指定这个类，您需要在</span><span
class=y2Char><span style='font-family:"Calibri","sans-serif"'>.jar</span></span><span
>文件的</span><span style='font-family:"Times New Roman","serif"'>manifest</span><span
>中添加键</span><span class=y2Char><span
style='font-family:"Calibri","sans-serif"'>MonkeyRunnerStartupRunner</span></span><span
>。其值为启动时运行的类的名称。以下代码段显示了如何在一个</span><span class=y2Char><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>ant</span></span><span
>构建脚本达到这样的目的：</span></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img
border=0 width=521 height=115
src="image/image017.png"></span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>如欲访问</span><span style='font-family:"Times New Roman","serif"'>monkeyrunner</span><span
>的运行时环境，启动类可以实现</span><span class=y2Char><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>com.google.common.base.Predicate&lt;PythonInterpreter&gt;</span></span><span
>。例如，用这个类在默认的命名空间中设置一些变量：</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US><img border=0 width=553 height=264
src="image/image018.jpg"></span></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;</span></p>

</div>

<span style='font-size:10.5pt;font-family:"Calibri","sans-serif"'><br
clear=all style='page-break-before:auto'>
</span>

      
</body>
</html>
